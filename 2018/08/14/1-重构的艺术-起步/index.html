<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="编程思想," />










<meta name="description" content="导言如果你正打算对代码进行重构，或者有重构的想法。本文及后续会给你提供一些建议，助你重构思路更为清晰。 作者也是在重构过程中遇到种种困难，耗费了大量的精力与时间，却不能确定其健壮性。于是拿起书本《重构–改善既有代码的设计》，作为指南。 本文及后续将提炼书本中提到的关键点以及例程。如需阅读书籍请下载 从代码开始本实例供一个影片出租店使用的程序，计算每一位顾客的消费金额并打印详单。操作者告诉程序：顾客">
<meta name="keywords" content="编程思想">
<meta property="og:type" content="article">
<meta property="og:title" content="[1].重构的艺术--起步">
<meta property="og:url" content="http://yoursite.com/2018/08/14/1-重构的艺术-起步/index.html">
<meta property="og:site_name" content="Q">
<meta property="og:description" content="导言如果你正打算对代码进行重构，或者有重构的想法。本文及后续会给你提供一些建议，助你重构思路更为清晰。 作者也是在重构过程中遇到种种困难，耗费了大量的精力与时间，却不能确定其健壮性。于是拿起书本《重构–改善既有代码的设计》，作为指南。 本文及后续将提炼书本中提到的关键点以及例程。如需阅读书籍请下载 从代码开始本实例供一个影片出租店使用的程序，计算每一位顾客的消费金额并打印详单。操作者告诉程序：顾客">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="data:image/png;base64,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o2bNmmnlypVaunTpFedYsmSJ7rrrLrVv317/+te/9Oyzz+r1119Xnz59FBAQoIMHD2rx4sXO/dPS0pSQkKCysjKNHj1aHTp00Jo1a/Tyyy9f0faqVasUHR1d6UtyUX8wPBsAAACA21QUt1Zr7frnKoZy9+7dW8OHD3f2UkuXZiFITk6WdGmqv8ufaa6YBnXWrFkKCwvTP//5T40ePVqpqamaOHGiS1xz5szR3XffrUOHDik2NlbFxcVKTk5Wly5dNGDAAD399NM6dOiQc/+VK1dKknr16iVvb2917dpV3333ndLS0jR58mSX+F944QX169evVt8BPAM9zQAAAADcpn379pKkffv21aqdGTNmKDAwUElJSYqOjr7mZ5jz8vIkScHBwZKkTp06SZKKi4t1/vx5l30rtvn7+zvXdenSRZIUEBAgSSorK3NuO3r0qCTp448/VnJysj7++GNJcg4zv1y3bt2uKV54PopmAAAAAG5TMRXpihUrdO7cOZdtFb3QXl5ekqRffvlFknTq1Kkr2unbt682btyo+fPn6/Tp00pMTHR5drjCf66rKHYrCtwjR45Iknx9feXj43Pd1yVJbdq0kSStWbNGGRkZLn//qUmTJrU6FzwHw7MBAAAAuE18fLy++uorff/994qJidE999yj5s2b6+DBg/rd736nJ554Qt26ddO3336rpKQkRUZGat26dVe0M3r0aIWFhTkL6mbNmrkUooGBgcrPz9f06dPVqVMnTZs2TZIUExOjZcuWacaMGRo4cKDS09MlSWPHjq31W6xHjhypFStWaMKECRo4cKC8vb2Vk5OjESNG6N57761V2/BcFM0AAAAA3KZ58+Z644039Pbbb+vzzz/Xhg0bZLVadcsttzhfijV16lS9+OKL+uabb5Sbm6u4uDjt37/fpZ2bb75Z69atU3l5uXr06KGJEye6FM1Tp07VggULlJWVpWPHjjnXP/roo5KkTz75RB999JECAgI0fvx45/raeOyxx+Tt7a3U1FSlpqbqpptuUteuXdW5c+datw3PVa8nDKuYgB6A5zFzAvrGjtwIeC5yo2eryJ9XG2oLwBwV04mZmT95phkAAKCeCQoKmhEYGPgXs+MAgMagQQzP5tdAwHNU/BoI85EbAc/hrtzo7e3d3dfXt7ekCw6HoywgIOBPBQUF/1NSUvKjW04AALgCPc0A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">
<meta property="og:updated_time" content="2018-08-17T01:53:29.341Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="[1].重构的艺术--起步">
<meta name="twitter:description" content="导言如果你正打算对代码进行重构，或者有重构的想法。本文及后续会给你提供一些建议，助你重构思路更为清晰。 作者也是在重构过程中遇到种种困难，耗费了大量的精力与时间，却不能确定其健壮性。于是拿起书本《重构–改善既有代码的设计》，作为指南。 本文及后续将提炼书本中提到的关键点以及例程。如需阅读书籍请下载 从代码开始本实例供一个影片出租店使用的程序，计算每一位顾客的消费金额并打印详单。操作者告诉程序：顾客">
<meta name="twitter:image" content="data:image/png;base64,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o2bNmmnlypVaunTpFedYsmSJ7rrrLrVv317/+te/9Oyzz+r1119Xnz59FBAQoIMHD2rx4sXO/dPS0pSQkKCysjKNHj1aHTp00Jo1a/Tyyy9f0faqVasUHR1d6UtyUX8wPBsAAACA21QUt1Zr7frnKoZy9+7dW8OHD3f2UkuXZiFITk6WdGmqv8ufaa6YBnXWrFkKCwvTP//5T40ePVqpqamaOHGiS1xz5szR3XffrUOHDik2NlbFxcVKTk5Wly5dNGDAAD399NM6dOiQc/+VK1dKknr16iVvb2917dpV3333ndLS0jR58mSX+F944QX169evVt8BPAM9zQAAAADcpn379pKkffv21aqdGTNmKDAwUElJSYqOjr7mZ5jz8vIkScHBwZKkTp06SZKKi4t1/vx5l30rtvn7+zvXdenSRZIUEBAgSSorK3NuO3r0qCTp448/VnJysj7++GNJcg4zv1y3bt2uKV54PopmAAAAAG5TMRXpihUrdO7cOZdtFb3QXl5ekqRffvlFknTq1Kkr2unbt682btyo+fPn6/Tp00pMTHR5drjCf66rKHYrCtwjR45Iknx9feXj43Pd1yVJbdq0kSStWbNGGRkZLn//qUmTJrU6FzwHw7MBAAAAuE18fLy++uorff/994qJidE999yj5s2b6+DBg/rd736nJ554Qt26ddO3336rpKQkRUZGat26dVe0M3r0aIWFhTkL6mbNmrkUooGBgcrPz9f06dPVqVMnTZs2TZIUExOjZcuWacaMGRo4cKDS09MlSWPHjq31W6xHjhypFStWaMKECRo4cKC8vb2Vk5OjESNG6N57761V2/BcFM0AAAAA3KZ58+Z644039Pbbb+vzzz/Xhg0bZLVadcsttzhfijV16lS9+OKL+uabb5Sbm6u4uDjt37/fpZ2bb75Z69atU3l5uXr06KGJEye6FM1Tp07VggULlJWVpWPHjjnXP/roo5KkTz75RB999JECAgI0fvx45/raeOyxx+Tt7a3U1FSlpqbqpptuUteuXdW5c+datw3PVa8nDKuYgB6A5zFzAvrGjtwIeC5yo2eryJ9XG2oLwBwV04mZmT95phkAAKCeCQoKmhEYGPgXs+MAgMagQQzP5tdAwHNU/BoI85EbAc/hrtzo7e3d3dfXt7ekCw6HoywgIOBPBQUF/1NSUvKjW04AALgCPc0A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">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2018/08/14/1-重构的艺术-起步/"/>





  <title>[1].重构的艺术--起步 | Q</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Q</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Quenwaz's Blog</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/14/1-重构的艺术-起步/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Quenwa Zhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Q">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">[1].重构的艺术--起步</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-08-14T22:22:43+08:00">
                2018-08-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/programming/" itemprop="url" rel="index">
                    <span itemprop="name">编码</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="导言"><a href="#导言" class="headerlink" title="导言"></a>导言</h3><p>如果你正打算对代码进行重构，或者有重构的想法。本文及后续会给你提供一些建议，助你重构思路更为清晰。</p>
<p>作者也是在重构过程中遇到种种困难，耗费了大量的精力与时间，却不能确定其健壮性。于是拿起书本《重构–改善既有代码的设计》，作为指南。</p>
<p>本文及后续将提炼书本中提到的关键点以及例程。如需阅读书籍请<a href="https://pan.baidu.com/s/13pKEuTqUm89hpeScsPwDLg" target="_blank" rel="noopener">下载</a></p>
<h3 id="从代码开始"><a href="#从代码开始" class="headerlink" title="从代码开始"></a>从代码开始</h3><p>本实例供一个影片出租店使用的程序，计算每一位顾客的消费金额并打印详单。操作者告诉程序：顾客租了那些影片、租期多长，程序便更具租赁时间和影片类型算出费用。影片分为：普通片、儿童片和新片。除了计算费用，还需为常客计算积分，积分根据影片类型而划分。</p>
<p><img src="data:image/png;base64,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o2bNmmnlypVaunTpFedYsmSJ7rrrLrVv317/+te/9Oyzz+r1119Xnz59FBAQoIMHD2rx4sXO/dPS0pSQkKCysjKNHj1aHTp00Jo1a/Tyyy9f0faqVasUHR1d6UtyUX8wPBsAAACA21QUt1Zr7frnKoZy9+7dW8OHD3f2UkuXZiFITk6WdGmqv8ufaa6YBnXWrFkKCwvTP//5T40ePVqpqamaOHGiS1xz5szR3XffrUOHDik2NlbFxcVKTk5Wly5dNGDAAD399NM6dOiQc/+VK1dKknr16iVvb2917dpV3333ndLS0jR58mSX+F944QX169evVt8BPAM9zQAAAADcpn379pKkffv21aqdGTNmKDAwUElJSYqOjr7mZ5jz8vIkScHBwZKkTp06SZKKi4t1/vx5l30rtvn7+zvXdenSRZIUEBAgSSorK3NuO3r0qCTp448/VnJysj7++GNJcg4zv1y3bt2uKV54PopmAAAAAG5TMRXpihUrdO7cOZdtFb3QXl5ekqRffvlFknTq1Kkr2unbt682btyo+fPn6/Tp00pMTHR5drjCf66rKHYrCtwjR45Iknx9feXj43Pd1yVJbdq0kSStWbNGGRkZLn//qUmTJrU6FzwHw7MBAAAAuE18fLy++uorff/994qJidE999yj5s2b6+DBg/rd736nJ554Qt26ddO3336rpKQkRUZGat26dVe0M3r0aIWFhTkL6mbNmrkUooGBgcrPz9f06dPVqVMnTZs2TZIUExOjZcuWacaMGRo4cKDS09MlSWPHjq31W6xHjhypFStWaMKECRo4cKC8vb2Vk5OjESNG6N57761V2/BcFM0AAAAA3KZ58+Z644039Pbbb+vzzz/Xhg0bZLVadcsttzhfijV16lS9+OKL+uabb5Sbm6u4uDjt37/fpZ2bb75Z69atU3l5uXr06KGJEye6FM1Tp07VggULlJWVpWPHjjnXP/roo5KkTz75RB999JECAgI0fvx45/raeOyxx+Tt7a3U1FSlpqbqpptuUteuXdW5c+datw3PVa8nDKuYgB6A5zFzAvrGjtwIeC5yo2eryJ9XG2oLwBwV04mZmT95phkAAKCeCQoKmhEYGPgXs+MAgMagQQzP5tdAwHNU/BoI85EbAc/hrtzo7e3d3dfXt7ekCw6HoywgIOBPBQUF/1NSUvKjW04AALgCPc0A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" alt=""></p>
<ul>
<li><p>Movie(影片)</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> _h_moveie_included</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> _h_moveie_included</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Movie</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Movie(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; title, <span class="keyword">int</span> princeCode)</span><br><span class="line">        : _title(title)</span><br><span class="line">        , _princeCode(princeCode)</span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getPrinceCode</span><span class="params">()</span> <span class="keyword">const</span> </span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>-&gt;_princeCode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setPrinceCode</span><span class="params">(<span class="keyword">int</span> nValue)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;_princeCode = nValue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="built_in">std</span>::<span class="function"><span class="built_in">string</span>&amp; <span class="title">getTitle</span><span class="params">()</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>-&gt;_title;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">int</span> CHILDRENS = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">int</span> REGULAR = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">int</span> NEW_RELEASE = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">string</span> _title;</span><br><span class="line">    <span class="keyword">int</span> _princeCode;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">//_h_moveie_included</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Rental(租赁)</p>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> _h_rental_included</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> _h_rental_included</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Movie.h"</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rental</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Rental(Movie movie, <span class="keyword">int</span> daysRented)</span><br><span class="line">        : _movie(movie)</span><br><span class="line">        , _daysRented(daysRented)</span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getDaysRented</span><span class="params">()</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>-&gt;_daysRented;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">const</span> Movie&amp;  <span class="title">getMovie</span><span class="params">()</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>-&gt;_movie;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Movie _movie;</span><br><span class="line">    <span class="keyword">int</span> _daysRented;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">//  _h_rental_included</span></span></span><br></pre></td></tr></table></figure>
<ul>
<li>Customer(顾客)</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> _h_customer_included</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> _h_customer_included</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;memory&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Rental.h"</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Customer</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Customer(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; name)</span><br><span class="line">        :_name(name)</span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">typedef</span> <span class="built_in">std</span>::<span class="built_in">shared_ptr</span>&lt;Rental&gt; RentalPtr;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">addRental</span><span class="params">(RentalPtr&amp; pRental)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;_rentals.push_back(pRental);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="built_in">std</span>::<span class="function"><span class="built_in">string</span>&amp; <span class="title">getName</span><span class="params">()</span> <span class="keyword">const</span> </span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>-&gt;_name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="function"><span class="built_in">string</span> <span class="title">statement</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">double</span> totalAmount = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> frequentRenterPoints = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">string</span> result = <span class="string">"Rental Record for "</span> + <span class="keyword">this</span>-&gt;_name +<span class="string">" \n"</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> each : <span class="keyword">this</span>-&gt;_rentals)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">double</span> thisAmount = <span class="number">0</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">switch</span>(each-&gt;getMovie().getPrinceCode())</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">case</span> Movie::CHILDRENS:</span><br><span class="line">                    thisAmount += <span class="number">1.5</span>;</span><br><span class="line">                    <span class="keyword">if</span> (each-&gt;getDaysRented() &gt; <span class="number">3</span>)&#123;</span><br><span class="line">                        thisAmount += (each-&gt;getDaysRented() - <span class="number">3</span>) * <span class="number">1.5</span>;</span><br><span class="line">                    &#125; </span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> Movie::REGULAR:</span><br><span class="line">                    thisAmount += <span class="number">2</span>;</span><br><span class="line">                    <span class="keyword">if</span> (each-&gt;getDaysRented() &gt; <span class="number">2</span>)&#123;</span><br><span class="line">                        thisAmount += (each-&gt;getDaysRented() - <span class="number">2</span>) * <span class="number">1.5</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> Movie::NEW_RELEASE:</span><br><span class="line">                    thisAmount += each-&gt;getDaysRented() * <span class="number">3</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">default</span>: <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            frequentRenterPoints++;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> ((each-&gt;getMovie().getPrinceCode() == Movie::NEW_RELEASE) &amp;&amp; each-&gt;getDaysRented() &gt; <span class="number">1</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                frequentRenterPoints++;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            result += <span class="string">"\t"</span> + each-&gt;getMovie().getTitle() + <span class="string">"\t"</span> + <span class="built_in">std</span>::to_string(thisAmount) + <span class="string">"\n"</span>;</span><br><span class="line"></span><br><span class="line">            totalAmount += thisAmount;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        result += <span class="string">"Amount owed is "</span> + <span class="built_in">std</span>::to_string(totalAmount) + <span class="string">"\n"</span>;</span><br><span class="line">        result += <span class="string">"You earned "</span> + <span class="built_in">std</span>::to_string(frequentRenterPoints) + <span class="string">" frequent renter points"</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">string</span> _name;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;RentalPtr&gt; _rentals;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">//_h_customer_included</span></span></span><br></pre></td></tr></table></figure>
<h3 id="评价"><a href="#评价" class="headerlink" title="评价"></a>评价</h3><p>在看了这一段程序后，你有什么吐槽点？或是有什么值得学习的地方？请仔细寻味一番，再继续往下看。</p>
<ul>
<li><p>槽点一</p>
<p>  Customer 类中的成员方法statement太长，显然做了过多的事情。做了本该由其他类或方法做的事情。</p>
</li>
<li><p>槽点二</p>
<p>  当需要以HTML格式输出详单，那么statement方法根本无法复用其任何行为。而你能做的事情就是再写一个类型HtmlStatement()方法重复statement中大多数行为。</p>
</li>
<li><p>槽点三</p>
<p>  如果计费标准发生改变，那么statement()及HtmlStatement()方法都需要做出相应的改变。且必须一致。相对写一个永不需要改变的程序，你觉得此处的设计如何？</p>
</li>
<li><p>槽点四</p>
<p>  当需要改变影片分类规则，这些规则会直接影响到顾客消费和常客积分点的计算方式。那么statement又要进行调整。</p>
</li>
</ul>
<p>综上，我们需要调整的重点即是statement()方法。此时重构技术就粉墨登场了。</p>
<blockquote>
<p>如果你发现需要为程序添加一个特性，而代码结构使你无法很方便地达到目的，那就先重构那个程序，使特性添加更容易进行。</p>
</blockquote>
<h3 id="开始重构"><a href="#开始重构" class="headerlink" title="开始重构"></a>开始重构</h3><h4 id="测试环境"><a href="#测试环境" class="headerlink" title="测试环境"></a>测试环境</h4><p>重构的第一步步骤永远相同，即为即将修改的代码建立一组可靠的测试环境。此步骤为必须的，在很大程度上可避免bug的入侵。可靠的测试可避免人为的错误。</p>
<p>当前程序statement()运行结果是个字符串，可先假设一些顾客租一些影片，然后产生报表字符串。然后可以将新生成的字符串与检查字符串作对比用于测试。</p>
<hr>
<p><small><font color="gray">本文<a href="http://quenwaz.github.io" target="_blank" rel="noopener">Quenwaz</a>版权所有，转载请说明出处</font></small></p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/ProgrammingThinking/" rel="tag"># 编程思想</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/08/12/利用Anaconda管理python/" rel="next" title="利用Anaconda管理python">
                <i class="fa fa-chevron-left"></i> 利用Anaconda管理python
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Quenwa Zhang</p>
              <p class="site-description motion-element" itemprop="description">人生有如一股奔流，没有暗礁，激不起美丽的浪花</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">21</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">13</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#导言"><span class="nav-number">1.</span> <span class="nav-text">导言</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#从代码开始"><span class="nav-number">2.</span> <span class="nav-text">从代码开始</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#评价"><span class="nav-number">3.</span> <span class="nav-text">评价</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#开始重构"><span class="nav-number">4.</span> <span class="nav-text">开始重构</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#测试环境"><span class="nav-number">4.1.</span> <span class="nav-text">测试环境</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Quenwa Zhang</span>

  
</div>









        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
