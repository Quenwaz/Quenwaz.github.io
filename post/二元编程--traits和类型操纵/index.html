<!DOCTYPE html>
<html
  lang="en"
  itemscope
  itemtype="http://schema.org/WebPage"
>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>
          二、元编程--Traits和类型操纵 - 胸无点墨 - quenwaz&#39;s personal blog
        </title>
    

<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes"/>

<meta name="MobileOptimized" content="width"/>
<meta name="HandheldFriendly" content="true"/>


<meta name="applicable-device" content="pc,mobile">

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="mobile-web-app-capable" content="yes">

<meta name="author" content="Quenwaz" />
  <meta name="description" content="类型关联 在C&#43;&#43;中，可以在编译期进行操纵的实体称为元数据(metadata),元数据可分为(任何元数据都可以作为模板参数): 非类型: 在{% post_link" />

  <meta name="keywords" content="Hugo, theme, jane" />






<meta name="generator" content="Hugo 0.115.1" />


<link rel="canonical" href="http://localhost:1313/post/%E4%BA%8C%E5%85%83%E7%BC%96%E7%A8%8B--traits%E5%92%8C%E7%B1%BB%E5%9E%8B%E6%93%8D%E7%BA%B5/" />





<link rel="icon" href="/favicon.ico" />











<link rel="stylesheet" href="/sass/jane.min.d8d87b982993a745e5e7b6a6cbf257be8c3e82aab5e485f0908ad7e6c3501ab2.css" integrity="sha256-2Nh7mCmTp0Xl57amy/JXvow&#43;gqq15IXwkIrX5sNQGrI=" media="screen" crossorigin="anonymous">







<meta property="og:title" content="二、元编程--Traits和类型操纵" />
<meta property="og:description" content="类型关联 在C&#43;&#43;中，可以在编译期进行操纵的实体称为元数据(metadata),元数据可分为(任何元数据都可以作为模板参数): 非类型: 在{% post_link" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/post/%E4%BA%8C%E5%85%83%E7%BC%96%E7%A8%8B--traits%E5%92%8C%E7%B1%BB%E5%9E%8B%E6%93%8D%E7%BA%B5/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2018-03-08T13:13:37+00:00" />
<meta property="article:modified_time" content="2018-03-08T13:13:37+00:00" />
<meta itemprop="name" content="二、元编程--Traits和类型操纵">
<meta itemprop="description" content="类型关联 在C&#43;&#43;中，可以在编译期进行操纵的实体称为元数据(metadata),元数据可分为(任何元数据都可以作为模板参数): 非类型: 在{% post_link"><meta itemprop="datePublished" content="2018-03-08T13:13:37+00:00" />
<meta itemprop="dateModified" content="2018-03-08T13:13:37+00:00" />
<meta itemprop="wordCount" content="2370">
<meta itemprop="keywords" content="C&#43;&#43;," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="二、元编程--Traits和类型操纵"/>
<meta name="twitter:description" content="类型关联 在C&#43;&#43;中，可以在编译期进行操纵的实体称为元数据(metadata),元数据可分为(任何元数据都可以作为模板参数): 非类型: 在{% post_link"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->




  </head>
  <body>
    <div id="back-to-top"></div>

    <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Quenwaz</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://localhost:1313/">主页</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://localhost:1313/post/">归档</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://localhost:1313/tags/">标签</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://localhost:1313/categories/">类别</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://localhost:1313/about/">关于</a>
          
        
      </li>
    

    
  </ul>
</nav>


    
      






  <link rel="stylesheet" href="/lib/photoswipe/photoswipe.min.css" />
  <link rel="stylesheet" href="/lib/photoswipe/default-skin/default-skin.min.css" />




<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

    

    

    


    <header id="header" class="header">
      <div class="logo-wrapper">
  <a href="/" class="logo">
    
      Quenwaz
    
  </a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://localhost:1313/">主页</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://localhost:1313/post/">归档</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://localhost:1313/tags/">标签</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://localhost:1313/categories/">类别</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://localhost:1313/about/">关于</a>
          

        

      </li>
    

    
    

    
  </ul>
</nav>

    </header>

    <div id="mobile-panel">
      <style>
        .main_background_image {
			background: 
				url(https://source.unsplash.com/collection/466697/1920x1080) center no-repeat,
				url(image/default.jpg) center no-repeat;
			background-size: cover;
			background-attachment: fixed;
			padding: 0;
			
		}
		.main_background_image_filter{
			backdrop-filter : blur(0px) brightness(120%);
			padding: 3em 0;
		}
      </style>
      <main id="main" class="main bg-llight wallpaper main_background_image">
		<div class="main_background_image_filter">
        <div class="content-wrapper">
    <div id="content" class="content">
      <article class="post">
        
        <header class="post-header">
          <h1 class="post-title">二、元编程--Traits和类型操纵</h1>
          

          <div class="post-meta">
  <div class="post-meta-author">
    by
      <a href="/about">
        <span class="post-meta-author-name">
          Quenwaz
        </span>
      </a>
    
  </div>

  <div class="post-meta-time">
    <time datetime="2018-03-08">
      2018-03-08
    </time>
  </div>

  


  <div class="post-meta__right">
    

    <div class="post-meta-category">
        <a href="http://localhost:1313/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"> 编程语言 </a>
          
      </div>


    
    


    
    
  </div>
</div>

        </header>

        
        <div class="post-content">
          <h3 id="类型关联">类型关联</h3>
<p>在C++中，可以在编译期进行操纵的实体称为<strong>元数据(metadata)</strong>,元数据可分为(任何元数据都可以作为模板参数):</p>
<ul>
<li>
<p>非类型:
在{% post_link 一、开始进行元编程 开始进行元编程 %}中的常量整数值就属于一种非类型，此类包括可在编译期知道的任何值类型。如：整形、枚举、函数和“全局”对象的指针与引用，及指向成员的指针。</p>
</li>
<li>
<p>类型:
而类型通常需要利用关键字typename进行声明。对于typename的使用条件：当使用一个依赖性的名字(dependent name)且该名字表示的是一个类型时，C++标准要求使用typename关键字标明。</p>
</li>
</ul>
<p>下面写一个简单的算法: iter_swap,它的主要职责用于接收两个迭代器交换它们的值：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ForwardIterator1</span>, <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ForwardIterator2</span> i2<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> iter_swap(ForwardIterator1 i1, ForwardIterator2 i2)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  T tmp <span style="color:#f92672">=</span> <span style="color:#f92672">*</span>i1;
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">*</span>i1 <span style="color:#f92672">=</span> <span style="color:#f92672">*</span>i2;
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">*</span>i2 <span style="color:#f92672">=</span> tmp;
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><p>以上代码无法通过编译， 错误很明显，对于类型T未定义。那么如何给这个类型命名呢？请往下看。</p>
<h4 id="一种直接的方式">一种直接的方式</h4>
<p>要求迭代器提供一个名称为value_type的嵌套类型，可以直接访问它：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ForwardIterator1</span>, <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ForwardIterator2</span> i2<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> iter_swap(ForwardIterator1 i1, ForwardIterator2 i2)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">typename</span> ForwardIterator1<span style="color:#f92672">::</span>value_type tmp <span style="color:#f92672">=</span> <span style="color:#f92672">*</span>i1;
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">*</span>i1 <span style="color:#f92672">=</span> <span style="color:#f92672">*</span>i2;
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">*</span>i2 <span style="color:#f92672">=</span> tmp;
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><p>对于类型关联来说，这是个好的策略，但它不具有一般性。C++中迭代器的设计是模仿指针，这样做的用意是普通的指针也可以用做合法的迭代器。而指针没有嵌套类型，所以不适用。只能适用于类类型。</p>
<h4 id="一种迂回的方式">一种迂回的方式</h4>
<p>我们无法为所有的迭代器都添加嵌套类型::value_type，但是我们可以将其添加到一个带有迭代器类型的参数模板。在标准库中，称为iterator_traits,如下:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Iterator</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">iterator_traits</span>;
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 下面调整iter_swap:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ForwardIterator1</span>, <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ForwardIterator2</span> i2<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> iter_swap(ForwardIterator1 i1, ForwardIterator2 i2)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">typename</span> iterator_traits<span style="color:#f92672">&lt;</span>ForwardIterator1<span style="color:#f92672">&gt;::</span>value_type tmp <span style="color:#f92672">=</span> <span style="color:#f92672">*</span>i1;
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">*</span>i1 <span style="color:#f92672">=</span> <span style="color:#f92672">*</span>i2;
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">*</span>i2 <span style="color:#f92672">=</span> tmp;
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><p>iterator_traits描述了实参的特性。这里的特性（traits）是迭代器的五个相关联类型：value_type、reference、pointer、difference_type及iterator_category。</p>
<p>traits模板最重要的功能是提供了一种非侵入的方式，使信息与类型进行关联。你只需要添加一个iterator_traits的显式特化(explicit specialization),当iter_swap使用时，就能看到特化中的value_type类型:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">iterator_traits</span><span style="color:#f92672">&lt;</span>Hector<span style="color:#f92672">::</span>hands_off<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">typedef</span> <span style="color:#66d9ef">int</span> value_type;
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">//..
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">// 另外四个typedefs
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>};
</span></span></code></pre></div><p>这种非侵入的方式，可以适用于指针，而非局限于类类型，只需局部特化一个版本：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">T</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">iterator_trait</span><span style="color:#f92672">&lt;</span>T<span style="color:#f92672">*&gt;</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">typedef</span> T value_type;
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// ...
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">// 另外四个typedefs
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>};
</span></span></code></pre></div><h4 id="寻找一种捷径">寻找一种捷径</h4>
<p>直接上代码:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Iterator</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">iterator_trait</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">typedef</span> <span style="color:#66d9ef">typename</span> Iterator<span style="color:#f92672">::</span>value_type value_type;
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// .. 另外四个typedefs
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>};
</span></span></code></pre></div><p>由代码可以看出，value_type 的具体类型由实参Iterator控制，作者在编码时只需要在Iterator内部添加一个value_type实际类型即可。</p>
<p>那么这样做的好处在哪里？相比进行特化而言，此方式明显更简洁，更能控制无必要的冗余代码。相对在类外部新增特化版本，在类内部控制更为便利。</p>
<h3 id="元函数">元函数</h3>
<p>相信阅读至此， 你已经注意到traits模板和普通函数之间存在某些相似性。traits的模板参数和嵌套类型在编译期发挥了类似于普通函数的参数和返回值在运行期发挥的作用。</p>
<p>处理传递和返回的是类型而非值外，traits模板还有两个显著的特征，他们在普通函数身上是看不到的：</p>
<ul>
<li><strong>特化</strong>：只需要添加一个特化就可以针对其参数特定的“值”非侵入性地修改traits模板结果。或通过使用局部特化为整个范围的“值”修改结果。如果将特化应用于普通函数，将不可思议。假如添加一个重载的std::abs，只有当其实参为一个奇数的时候才能调用该特化版本。</li>
<li><strong>多个返回值</strong>：通常普通函数传递多个实参只返回一个值（输出实参除外）。而traits通常具有不止一个返回结果。如， std::iterator_traits包含五个嵌套类型:value_type、reference、pointer、different_type及iterator_category。</li>
</ul>
<p>为了深入了解&quot;类模板用作函数&quot;的思想，我们将使用术语<strong>元函数(metafunctions)</strong>。</p>
<p>标准库中traits模板都遵从&quot;多个返回值&quot;模型。通常此类模型称为&quot;blob&quot;，因为它似乎是将单独的，松散相关的元函数揉碎后放入单个单元中。这种方式会存在如下弊端:</p>
<ul>
<li>
<p>当首次进入iterator_traits访问::value_type时，该模板会被实例化，意味着编译器需要承担很多工作，而且不仅只计算value_type，其他四个相关联类型都需要计算(即使用不到)</p>
</li>
<li>
<p>降低了互操作能力，因为将多个元函数捆绑，如:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">X</span>, <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">UnaryOp1</span>, <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">UnaryOp2</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>X apply_fg(X x, UnaryOp1 f, UnaryOp2 g)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">return</span> <span style="color:#a6e22e">f</span>(g(x));
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>而利用blob的方式:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">X</span>, <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Blob</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>X apply_fg(X x, Blob blob)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">return</span> blob.f(blob.g(x));
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>显然第二种方式意味着必须是Blob成员，而第一种方式可以如下操作:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;functional&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">float</span> <span style="color:#a6e22e">log2</span>(<span style="color:#66d9ef">float</span>);
</span></span></code></pre></div></li>
</ul>
<p>int a = apply_fg(5.0f, std::negate<!-- raw HTML omitted -->(), log2);
int b = apply_fg(-2.14f, log2, std::negate<!-- raw HTML omitted -->());</p>
<pre tabindex="0"><code>这种允许不同实参类型可交换使用的属性，成为多态(polymorphism)
&gt; **多态**&lt;br/&gt;
 C++中有两种多态。常见的**动态多态(dynamic polymorphism)** 即单个基类指针或引用可处理多个派生类型的对象。而此处提到的是**静态多态(static polymorphism)** 允许不同类型的对象以同样的方式被操纵。&lt;br/&gt;
 - 动态多态，连同&#34;迟绑定&#34;或&#34;运行期派发&#34;(C++ 借助于虚函数提供的特性)，是面向对象编程的关键特性。通常在运行期。
 - 静态多态，也称为参数化多态是泛型编程的本质要素。通常在编译期间

### 数值元函数
数值元函数也称常量外覆器
```C++
struct five
{
  static int const value = 5;
  typedef int value_type;
  // ...
}
</code></pre><p>以上代码看似不方便，这样做的原因:要求所有元函数和返回类型，可以使他们更统一，更多态。</p>
<p>在boost所有数值型原函数都是这么做的，后续章节将讲到它所带来的好处。</p>
<h3 id="在编译期作出选择">在编译期作出选择</h3>
<h4 id="进一步讨论iter_swap">进一步讨论iter_swap</h4>
<ul>
<li>
<p><input disabled="" type="checkbox"> 待完善</p>
<!-- raw HTML omitted -->
</li>
</ul>
<hr>
<p><!-- raw HTML omitted --><!-- raw HTML omitted -->本文<a href="http://quenwaz.github.io">Quenwaz</a>版权所有，转载请说明出处<!-- raw HTML omitted --><!-- raw HTML omitted --></p>

        </div>

        
        
<div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">Author</span>
    <span class="item-content">Quenwaz</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">LastMod</span>
    <span class="item-content">
      2018-03-08
      
    </span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">License</span>
    <span class="item-content"><a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">CC BY-NC-ND 4.0</a></span>
  </p>
</div>



        
        


        <footer class="post-footer">
          <div class="post-tags">
              <a href="http://localhost:1313/tags/c&#43;&#43;/">C&#43;&#43;</a>
                
            </div>


          
          <nav class="post-nav">
            
              <a class="prev" href="/post/c&#43;&#43;11%E5%8F%B3%E5%80%BC%E5%8F%B3%E5%80%BC%E5%BC%95%E7%94%A8%E4%B8%8E%E8%BD%AC%E7%A7%BB%E8%AF%AD%E4%B9%89/">
                
                <i class="iconfont">
                  <svg  class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M691.908486 949.511495l75.369571-89.491197c10.963703-12.998035 10.285251-32.864502-1.499144-44.378743L479.499795 515.267417 757.434875 204.940602c11.338233-12.190647 11.035334-32.285311-0.638543-44.850487l-80.46666-86.564541c-11.680017-12.583596-30.356378-12.893658-41.662889-0.716314L257.233596 494.235404c-11.332093 12.183484-11.041474 32.266891 0.657986 44.844348l80.46666 86.564541c1.772366 1.910513 3.706415 3.533476 5.750981 4.877077l306.620399 321.703933C662.505829 963.726242 680.945807 962.528973 691.908486 949.511495z"></path>
</svg>

                </i>
                <span class="prev-text nav-default">C&#43;&#43;11右值，右值引用与转移语义</span>
                <span class="prev-text nav-mobile">Prev</span>
              </a>
            
              <a class="next" href="/post/%E4%B8%80%E5%85%83%E7%BC%96%E7%A8%8B--%E5%BC%80%E5%A7%8B%E8%BF%9B%E8%A1%8C%E5%85%83%E7%BC%96%E7%A8%8B/">
                <span class="next-text nav-default">一、元编程--开始进行元编程</span>
                <span class="prev-text nav-mobile">Next</span>
                
                <i class="iconfont">
                  <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M332.091514 74.487481l-75.369571 89.491197c-10.963703 12.998035-10.285251 32.864502 1.499144 44.378743l286.278095 300.375162L266.565125 819.058374c-11.338233 12.190647-11.035334 32.285311 0.638543 44.850487l80.46666 86.564541c11.680017 12.583596 30.356378 12.893658 41.662889 0.716314l377.434212-421.426145c11.332093-12.183484 11.041474-32.266891-0.657986-44.844348l-80.46666-86.564541c-1.772366-1.910513-3.706415-3.533476-5.750981-4.877077L373.270379 71.774697C361.493148 60.273758 343.054193 61.470003 332.091514 74.487481z"></path>
</svg>

                </i>
              </a>
          </nav>
        </footer>
      </article>

      
      


      
      

  

  
  

  
  

  

  

    

  

  


    </div>

    
    <nav class="toc" id="toc">
    <div class="toc-title">Table of Contents</div>
    <div class="toc-content custom-scrollbar">
      <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#类型关联">类型关联</a></li>
        <li><a href="#元函数">元函数</a></li>
        <li><a href="#在编译期作出选择">在编译期作出选择</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
  </nav>


  </div>
		</div>
      </main>

      <footer id="footer" class="footer">
        <div class="icon-links">
  
  
    <a href="mailto:404937333@qq.com" rel="me noopener" class="iconfont"
      title="email" >
      <svg class="icon" viewBox="0 0 1451 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M664.781909 681.472759 0 97.881301C0 3.997201 71.046997 0 71.046997 0L474.477909 0 961.649408 0 1361.641813 0C1361.641813 0 1432.688811 3.997201 1432.688811 97.881301L771.345323 681.472759C771.345323 681.472759 764.482731 685.154773 753.594283 688.65053L753.594283 688.664858C741.602731 693.493018 729.424896 695.068979 718.077952 694.839748 706.731093 695.068979 694.553173 693.493018 682.561621 688.664858L682.561621 688.65053C671.644501 685.140446 664.781909 681.472759 664.781909 681.472759L664.781909 681.472759ZM718.063616 811.603883C693.779541 811.016482 658.879232 802.205449 619.10784 767.734955 542.989056 701.759633 0 212.052267 0 212.052267L0 942.809523C0 942.809523 0 1024 83.726336 1024L682.532949 1024 753.579947 1024 1348.948139 1024C1432.688811 1024 1432.688811 942.809523 1432.688811 942.809523L1432.688811 212.052267C1432.688811 212.052267 893.138176 701.759633 817.019477 767.734955 777.248 802.205449 742.347691 811.03081 718.063616 811.603883L718.063616 811.603883Z"></path>
</svg>

    </a>
  
    <a href="http://localhost:1313" rel="me noopener" class="iconfont"
      title="github"  target="_blank"
      >
      <svg class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M512 12.672c-282.88 0-512 229.248-512 512 0 226.261333 146.688 418.133333 350.08 485.76 25.6 4.821333 34.986667-11.008 34.986667-24.618667 0-12.16-0.426667-44.373333-0.64-87.04-142.421333 30.890667-172.458667-68.693333-172.458667-68.693333C188.672 770.986667 155.008 755.2 155.008 755.2c-46.378667-31.744 3.584-31.104 3.584-31.104 51.413333 3.584 78.421333 52.736 78.421333 52.736 45.653333 78.293333 119.850667 55.68 149.12 42.581333 4.608-33.109333 17.792-55.68 32.426667-68.48-113.706667-12.8-233.216-56.832-233.216-253.013333 0-55.893333 19.84-101.546667 52.693333-137.386667-5.76-12.928-23.04-64.981333 4.48-135.509333 0 0 42.88-13.738667 140.8 52.48 40.96-11.392 84.48-17.024 128-17.28 43.52 0.256 87.04 5.888 128 17.28 97.28-66.218667 140.16-52.48 140.16-52.48 27.52 70.528 10.24 122.581333 5.12 135.509333 32.64 35.84 52.48 81.493333 52.48 137.386667 0 196.693333-119.68 240-233.6 252.586667 17.92 15.36 34.56 46.762667 34.56 94.72 0 68.522667-0.64 123.562667-0.64 140.202666 0 13.44 8.96 29.44 35.2 24.32C877.44 942.592 1024 750.592 1024 524.672c0-282.752-229.248-512-512-512"></path>
</svg>

    </a>


<a href="http://localhost:1313/index.xml" rel="noopener alternate" type="application/rss&#43;xml"
    class="iconfont" title="rss" target="_blank">
    <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="30" height="30">
  <path d="M819.157333 1024C819.157333 574.592 449.408 204.8 0 204.8V0c561.706667 0 1024 462.293333 1024 1024h-204.842667zM140.416 743.04a140.8 140.8 0 0 1 140.501333 140.586667A140.928 140.928 0 0 1 140.074667 1024C62.72 1024 0 961.109333 0 883.626667s62.933333-140.544 140.416-140.586667zM678.784 1024h-199.04c0-263.210667-216.533333-479.786667-479.744-479.786667V345.173333c372.352 0 678.784 306.517333 678.784 678.826667z"></path>
</svg>

  </a>
  
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - <a class="theme-link" href="https://github.com/xianmin/hugo-theme-jane">Jane</a>
  </span>

  <span class="copyright-year">
    &copy;
    
      2017 -
    2023
    <span class="heart">
      
      <i class="iconfont">
        <svg class="icon" viewBox="0 0 1025 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="14" height="14">
  <path d="M1000.1 247.9c-15.5-37.3-37.6-70.6-65.7-98.9-54.4-54.8-125.8-85-201-85-85.7 0-166 39-221.4 107.4C456.6 103 376.3 64 290.6 64c-75.1 0-146.5 30.4-201.1 85.6-28.2 28.5-50.4 61.9-65.8 99.3-16 38.8-24 79.9-23.6 122.2 0.7 91.7 40.1 177.2 108.1 234.8 3.1 2.6 6 5.1 8.9 7.8 14.9 13.4 58 52.8 112.6 102.7 93.5 85.5 209.9 191.9 257.5 234.2 7 6.1 15.8 9.5 24.9 9.5 9.2 0 18.1-3.4 24.9-9.5 34.5-30.7 105.8-95.9 181.4-165 74.2-67.8 150.9-138 195.8-178.2 69.5-57.9 109.6-144.4 109.9-237.3 0.1-42.5-8-83.6-24-122.2z"
   fill="#8a8a8a"></path>
</svg>

      </i>
    </span><span class="author">
        Quenwaz
        
      </span></span>

  
  

  
</div>

      </footer>

      <div class="button__back-to-top">
        <a href="#back-to-top">
          <i class="iconfont">
            
            <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="35" height="35">
  <path d="M510.866688 227.694839 95.449397 629.218702l235.761562 0-2.057869 328.796468 362.40389 0L691.55698 628.188232l241.942331-3.089361L510.866688 227.694839zM63.840492 63.962777l894.052392 0 0 131.813095L63.840492 195.775872 63.840492 63.962777 63.840492 63.962777zM63.840492 63.962777"></path>
</svg>

          </i>
        </a>
      </div>
    </div>
    
<script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>




<script type="text/javascript" src="/js/main.e8d9431b8fdb23cc8f73a68ee0cc33d4c1ed0dd4dff2d3f5e3b9c5ee536f256e.js" integrity="sha256-6NlDG4/bI8yPc6aO4Mwz1MHtDdTf8tP147nF7lNvJW4=" crossorigin="anonymous"></script>












  
    <script type="text/javascript" src="/lib/photoswipe/photoswipe.min.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe-ui-default.min.js"></script>
  

















  </body>
</html>
